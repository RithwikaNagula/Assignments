<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tic Tac Toe</title>
<link rel="stylesheet" href="../Styles/Style.css">

<body>

<div class="game-container">
    <h1>Tic Tac Toe</h1>
    <div class="status" id="status">Player X's turn</div>

    <div class="board" id="board">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
    </div>

    <button id="restart">Restart Game</button>
</div>

<script>
    const cells = document.querySelectorAll('.cell');
    const statusText = document.getElementById('status');
    const restartBtn = document.getElementById('restart');

    let currentPlayer = 'X';
    let gameActive = true;
    let boardState = ["", "", "", "", "", "", "", "", ""];

    const winningCombinations = [
        [0,1,2],
        [3,4,5],
        [6,7,8],
        [0,3,6],
        [1,4,7],
        [2,5,8],
        [0,4,8],
        [2,4,6]
    ];

    function handleCellClick(e) {
        const cell = e.target;
        const index = cell.dataset.index;

        if (boardState[index] !== "" || !gameActive) return;

        boardState[index] = currentPlayer;
        cell.textContent = currentPlayer;
        cell.classList.add('taken', currentPlayer.toLowerCase());

        checkResult();
    }

    function checkResult() {
        let roundWon = false;

        for (let combo of winningCombinations) {
            const [a, b, c] = combo;
            if (
                boardState[a] &&
                boardState[a] === boardState[b] &&
                boardState[a] === boardState[c]
            ) {
                roundWon = true;
                break;
            }
        }

        if (roundWon) {
            statusText.textContent = `Player ${currentPlayer} wins! `;
            gameActive = false;
            return;
        }

        if (!boardState.includes("")) {
            statusText.textContent = "It's a draw";
            gameActive = false;
            return;
        }

        currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
        statusText.textContent = `Player ${currentPlayer}'s turn`;
    }

    function restartGame() {
        currentPlayer = 'X';
        gameActive = true;
        boardState = ["", "", "", "", "", "", "", "", ""];
        statusText.textContent = "Player X's turn";

        cells.forEach(cell => {
            cell.textContent = "";
            cell.classList.remove('taken', 'x', 'o');
        });
    }

    cells.forEach(cell => cell.addEventListener('click', handleCellClick));
    restartBtn.addEventListener('click', restartGame);
</script>

</body>
</html>
